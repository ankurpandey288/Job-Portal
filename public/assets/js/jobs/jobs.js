(()=>{"use strict";var e="#jobsTbl";$(e).DataTable({processing:!0,serverSide:!0,order:[[0,"asc"]],ajax:{url:jobsUrl,data:function(e){e.is_featured=$("#filter_featured").find("option:selected").val(),e.status=$("#filter_status").find("option:selected").val()}},columnDefs:[{targets:[0],width:"25%"},{targets:[1],width:"10%"},{targets:[2],className:"text-right",width:"20%"},{targets:[3],orderable:!1,className:"text-center",width:"15%"},{targets:[4],orderable:!1,className:"text-center",width:"15%"},{targets:[5],orderable:!1,className:"text-center",width:"15%"}],columns:[{data:function(e){var t=document.createElement("textarea");return t.innerHTML=e.job_title,'<a href="'+frontJobDetail+"/"+e.job_id+'" target="_blank">'+t.value+"</a>"},name:"job_title"},{data:function(e){return moment().format("YYYY-MM-DD")>moment(e.job_expiry_date).format("YYYY-MM-DD")?'<div class="badge badge-danger">'+moment(e.job_expiry_date,"YYYY-MM-DD hh:mm:ss").format("Do MMM, YYYY")+"</div>":'<div class="badge badge-primary">'+moment(e.job_expiry_date,"YYYY-MM-DD hh:mm:ss").format("Do MMM, YYYY")+"</div>"},name:"job_expiry_date"},{data:function(e){return'<div class="badge badge-primary">'+ +e.applied_jobs.length+"</div>"},name:"id"},{data:function(e){var t,a=e.active_featured;a&&(t=moment(a.end_time).format("YYYY-MM-DD"));var s=[{id:e.id,featured:a,expiryDate:t,isFeaturedEnable:1==isFeaturedEnable,isFeaturedAvilabal,isJobLive:1==e.status}];return(new Date).toISOString().split("T")[0]>e.job_expiry_date?'<i class="font-20 fas fa-times-circle text-danger"></i>':prepareTemplateRender("#feauredJobTemplate",s)},name:"hide_salary"},{data:function(e){var t=!1;2==e.status&&(t=!0);var a=[{status:statusArray[e.status],statusColor:{0:"dark",1:"success",2:"warning",3:"primary"}[e.status],isJobClosed:t,id:e.id}];return prepareTemplateRender("#jobStatusActionTemplate",a)},name:"id"},{data:function(e){var t=jobsUrl+"/"+e.id,a=!1,s=!1,r=!1;2==e.status&&(a=!0),3==e.status&&(s=!0),0==e.status&&(r=!0);var n=[{id:e.id,url:t+"/edit",isJobClosed:a,isJobPause:s,isJobDraft:r,jobApplicationUrl:t+"/applications",jobId:e.job_id}];return prepareTemplateRender("#jobActionTemplate",n)},name:"id"}],fnInitComplete:function(){$("#filter_featured,#filter_status").change((function(){$(e).DataTable().ajax.reload(null,!0)}))}}),$(document).ready((function(){$("#filter_featured").select2({width:"170px"}),$("#filter_status").select2({width:"150px"})})),$(document).on("click",".delete-btn",(function(t){var a=$(t.currentTarget).data("id");deleteItem(jobsUrl+"/"+a,e,Lang.get("messages.job.job"))})),$(document).on("click",".change-status",(function(e){var t=$(this).data("id"),a=statusArray.indexOf($(this).data("option"));swal({title:"Attention !",text:"Are you sure want to change the status?",type:"info",showCancelButton:!0,closeOnConfirm:!1,showLoaderOnConfirm:!0,confirmButtonColor:"#6777ef",cancelButtonColor:"#d33",cancelButtonText:Lang.get("messages.common.no"),confirmButtonText:Lang.get("messages.common.yes")},(function(){changeStatus(t,a)}))})),window.changeStatus=function(t,a){$.ajax({url:jobStatusUrl+t+"/status/"+a,method:"get",cache:!1,success:function(t){t.success&&$(e).DataTable().ajax.reload(null,!1)},error:function(e){displayErrorMessage(e.responseJSON.message)},complete:function(){swal.close()}})},$(document).on("click",".copy-btn",(function(e){var t=$(e.currentTarget).data("job-id"),a=frontJobDetail+"/"+t,s=$("<input>");$("body").append(s),s.val(a).select(),document.execCommand("copy"),s.remove(),displaySuccessMessage("Link Copied Successfully.")}))})();