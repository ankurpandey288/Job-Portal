(()=>{$(document).ready((function(){"use strict";$("#filter_featured,#filter_suspended,#filter_freelancer,#filter_expiry_date,#filter_job_active_expire").select2()}));var e="#jobsTbl";$(e).DataTable({processing:!0,serverSide:!0,order:[[0,"asc"]],ajax:{url:jobsUrl,data:function(e){e.is_featured=$("#filter_featured").find("option:selected").val(),e.is_suspended=$("#filter_suspended").find("option:selected").val(),e.is_freelancer=$("#filter_freelancer").find("option:selected").val(),e.expiry_date=$("#filter_expiry_date").find("option:selected").val(),e.is_job_active=$("#filter_job_active_expire").find("option:selected").val()}},columnDefs:[{targets:[3],orderable:!1,className:"text-center",width:"9%"},{targets:[4],orderable:!1,className:"text-center",width:"11%"},{targets:[2],width:"15%"},{targets:[1],width:"15%"},{targets:[5],orderable:!1,className:"text-center",width:"5%"}],columns:[{data:function(e){var t=document.createElement("textarea");return t.innerHTML=e.job_title,'<a href="'+jobsUrl+"/"+e.id+'">'+t.value+"</a>"},name:"job_title"},{data:function(e){return moment(e.created_at,"YYYY-MM-DD hh:mm:ss").format("Do MMM, YYYY")},name:"created_at"},{data:function(e){return(new Date).toISOString().split("T")[0]>e.job_expiry_date?'<span class="text-danger">'+moment(e.job_expiry_date,"YYYY-MM-DD hh:mm:ss").format("Do MMM, YYYY")+"</span>":moment(e.job_expiry_date,"YYYY-MM-DD hh:mm:ss").format("Do MMM, YYYY")},name:"job_expiry_date"},{data:function(e){var t,a=e.active_featured;a&&(t=moment(a.end_time).format("YYYY-MM-DD"));var r=[{id:e.id,featured:a,expiryDate:t}];return(new Date).toISOString().split("T")[0]>e.job_expiry_date?'<i class="font-20 fas fa-times-circle text-danger"></i>':prepareTemplateRender("#isFeatured",r)},name:"hide_salary"},{data:function(e){var t=!1===e.is_suspended?"":"checked",a=[{id:e.id,checked:t}];return prepareTemplateRender("#isSuspended",a)},name:"hide_salary"},{data:function(e){var t=jobsUrl+"/"+e.id,a=[{id:e.id,url:t+"/edit"}];return prepareTemplateRender("#jobActionTemplate",a)},name:"id"}],fnInitComplete:function(){$("#filter_featured,#filter_suspended,#filter_freelancer,#filter_expiry_date,#filter_job_active_expire").change((function(){$(e).DataTable().ajax.reload(null,!0)}))}}),$(document).on("click",".delete-btn",(function(t){var a=$(t.currentTarget).data("id");deleteItem(jobsUrl+"/"+a,e,Lang.get("messages.job.job"))})),$(document).on("click"," .adminJobMakeFeatured ",(function(e){var t=$(e.currentTarget).data("id");jobMakeFeatured(t)})),window.jobMakeFeatured=function(t){$.ajax({url:jobsUrl+"/"+t+"/make-job-featured",method:"post",cache:!1,success:function(t){t.success&&($(e).DataTable().ajax.reload(null,!1),displaySuccessMessage(t.message),$('[data-toggle="tooltip"]').tooltip("hide"))},error:function(e){displayErrorMessage(e.responseJSON.message)}})},$(document).on("click"," .adminJobUnFeatured ",(function(e){var t=$(e.currentTarget).data("id");jobMakeUnFeatured(t)})),window.jobMakeUnFeatured=function(t){$.ajax({url:jobsUrl+"/"+t+"/make-job-unfeatured",method:"post",cache:!1,success:function(t){t.success&&($(e).DataTable().ajax.reload(null,!1),displaySuccessMessage(t.message),$('[data-toggle="tooltip"]').tooltip("hide"))},error:function(e){displayErrorMessage(e.responseJSON.message)}})},$(document).on("change",".isSuspended",(function(e){var t=$(e.currentTarget).data("id");activeIsSuspended(t)})),window.activeIsSuspended=function(t){$.ajax({url:jobsUrl+"/"+t+"/change-is-suspend",method:"post",cache:!1,success:function(t){t.success&&(displaySuccessMessage(t.message),$(e).DataTable().ajax.reload(null,!1))},error:function(e){displayErrorMessage(e.responseJSON.message)}})},$("#jobsFilters").on("click",(function(){$("#jobsFiltersForm").toggleClass("d-block d-none")})),$(document).on("click","#reset-filter",(function(){$("#filter_featured,#filter_suspended,#filter_freelancer,#filter_expiry_date,#filter_job_active_expire").val("").change()})),$(document).on("click",(function(e){0===$(e.target).closest("#jobsFilters,#jobsFiltersForm").length&&$("#jobsFiltersForm").removeClass("d-block").addClass("d-none")}))})();